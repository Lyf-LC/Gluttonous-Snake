"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[179],{607:function(){var e=function(){function e(){this.viev=document.querySelector(".viev"),this.element=document.querySelector(".food")}return Object.defineProperty(e.prototype,"X",{get:function(){return this.element.offsetLeft},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this.element.offsetTop},enumerable:!1,configurable:!0}),e.prototype.create=function(){var e=parseInt(getComputedStyle(this.viev,null).borderWidth),t=(parseInt(getComputedStyle(this.viev,null).width)-2*e-parseInt(getComputedStyle(this.element,null).width))/10,o=10*Math.round(Math.random()*t),n=10*Math.round(Math.random()*t);this.element.style.left=o+"px",this.element.style.top=n+"px"},e}(),t=function(){function e(e,t){void 0===e&&(e=10),void 0===t&&(t=5),this.score=0,this.level=1,this.scoreEl=document.querySelector("#score"),this.levelEl=document.querySelector("#level"),this.maxLevel=e,this.update=t}return e.prototype.addScore=function(){this.scoreEl.innerHTML="".concat(++this.score),this.score%this.update==0&&this.addLevel()},e.prototype.addLevel=function(){this.level<this.maxLevel&&(this.levelEl.innerHTML="".concat(++this.level))},e}(),o=function(){function e(){this.element=document.querySelector(".snake"),this.head=document.querySelector(".snake>div"),this.body=this.element.getElementsByTagName("div")}return Object.defineProperty(e.prototype,"X",{get:function(){return this.head.offsetLeft},set:function(e){if(this.X!=e){if(e<0||e>=parseInt(getComputedStyle(document.querySelector(".viev"),null).width))throw new Error("蛇撞墙了");if(this.body[1]&&this.body[1].offsetLeft===e)throw new Error("蛇撞到自己了");this.moveBody(),this.head.style.left="".concat(e,"px"),this.snakeCrash()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this.head.offsetTop},set:function(e){if(this.Y!=e){if(e<0||e>=parseInt(getComputedStyle(document.querySelector(".viev"),null).height))throw new Error("蛇撞墙了");if(this.body[1]&&this.body[1].offsetTop===e)throw new Error("蛇撞到自己了");this.moveBody(),this.head.style.top="".concat(e,"px"),this.snakeCrash()}},enumerable:!1,configurable:!0}),e.prototype.addSnake=function(){this.element.insertAdjacentHTML("beforeend","<div></div>")},e.prototype.moveBody=function(){for(var e=this.body.length-1;e>0;e--){var t=this.body[e-1].offsetLeft,o=this.body[e-1].offsetTop;this.body[e].style.left="".concat(t,"px"),this.body[e].style.top="".concat(o,"px")}},e.prototype.snakeCrash=function(){for(var e=1;e<this.body.length;e++)if(this.X===this.body[e].offsetLeft&&this.Y===this.body[e].offsetTop)throw new Error("蛇撞到自己了")},e}();new(function(){function n(){this.keyBay="ArrowRight",this.flag=!0,this.off=!0,this.food=new e,this.scoringDevice=new t(10,3),this.snake=new o,this.begin=document.querySelector("#begin"),this.go()}return n.prototype.init=function(){document.addEventListener("keydown",this.keydownH.bind(this)),this.move()},n.prototype.go=function(){var e=this;this.begin.addEventListener("click",(function(){if(e.off){e.begin.innerHTML="按下 p 键暂停";for(;1<e.snake.body.length;)e.snake.body[1].remove();e.scoringDevice.score=0,e.scoringDevice.level=1,e.scoringDevice.scoreEl.innerHTML="".concat(e.scoringDevice.score),e.scoringDevice.levelEl.innerHTML="".concat(e.scoringDevice.level),e.snake.X=0,e.snake.Y=0,e.flag=!0,e.keyBay="ArrowRight",e.init(),e.off=!1}}))},n.prototype.keydownH=function(e){var t=this;["ArrowUp","w","ArrowDown","s","ArrowRight","d","ArrowLeft","a","p"].forEach((function(o){e.key==o&&(t.keyBay=e.key)}))},n.prototype.move=function(){var e=this.snake.X,t=this.snake.Y;switch(this.keyBay){case"ArrowUp":case"w":t-=10;break;case"ArrowDown":case"s":t+=10;break;case"ArrowRight":case"d":e+=10;break;case"ArrowLeft":case"a":e-=10;break;case"p":this.keyBay="",document.body.style.backgroundColor="#bfa",document.getElementById("end").innerHTML="游戏暂停"}""!=this.keyBay&&(document.body.style.backgroundColor="#fff",document.getElementById("end").innerHTML=""),this.eatFoot(e,t);try{this.snake.X=e,this.snake.Y=t}catch(e){document.body.style.backgroundColor="red",this.begin.innerHTML="重新开始",document.getElementById("end").innerHTML="".concat(e.message,"  GameOver"),this.off=!0,this.flag=!1}this.flag&&setTimeout(this.move.bind(this),250-25*(this.scoringDevice.level-1))},n.prototype.eatFoot=function(e,t){e===this.food.X&&t===this.food.Y&&(this.snake.addSnake(),this.food.create(),this.scoringDevice.addScore())},n}())}},function(e){var t;t=607,e(e.s=t)}]);
//# sourceMappingURL=main.c6405b04.js.map