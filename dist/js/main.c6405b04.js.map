{"version":3,"file":"js/main.c6405b04.js","mappings":"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","sources":["webpack://webpack_test/./src/index.ts"],"sourcesContent":["import \"./index.less\"\r\n\r\n//食物\r\nclass Food {\r\n    element: HTMLElement\r\n    viev: HTMLElement = document.querySelector(\".viev\")\r\n\r\n    constructor() {\r\n        this.element = document.querySelector('.food')\r\n    }\r\n\r\n    get X() {\r\n        return this.element.offsetLeft\r\n    }\r\n\r\n    get Y() {\r\n        return this.element.offsetTop\r\n    }\r\n\r\n    create() {\r\n        const vievBorderWidth = parseInt(getComputedStyle(this.viev, null).borderWidth)\r\n        const vievWidth = parseInt(getComputedStyle(this.viev, null).width) - vievBorderWidth * 2\r\n        const elementWidth = parseInt(getComputedStyle(this.element, null).width)\r\n        //除以10 除以蛇的步长\r\n        const width = (vievWidth - elementWidth) / 10\r\n        const left = Math.round(Math.random() * width) * 10\r\n        const top = Math.round(Math.random() * width) * 10\r\n        this.element.style.left = left + \"px\"\r\n        this.element.style.top = top + \"px\"\r\n    }\r\n}\r\n\r\n//计分器\r\nclass scoringDevice {\r\n    scoreEl: HTMLElement\r\n    levelEl: HTMLElement\r\n    score = 0\r\n    level = 1\r\n    //等级上限\r\n    maxLevel: number\r\n    //多少分升一级\r\n    update: number\r\n\r\n    constructor(maxLevel: number = 10, update: number = 5) {\r\n        this.scoreEl = document.querySelector(\"#score\")\r\n        this.levelEl = document.querySelector(\"#level\")\r\n        this.maxLevel = maxLevel\r\n        this.update = update\r\n    }\r\n\r\n    addScore() {\r\n        this.scoreEl.innerHTML = `${++this.score}`\r\n        if (this.score % this.update == 0) {\r\n            this.addLevel()\r\n        }\r\n    }\r\n\r\n    addLevel() {\r\n        if (this.level < this.maxLevel) {\r\n            this.levelEl.innerHTML = `${++this.level}`\r\n        }\r\n    }\r\n}\r\n\r\n//蛇\r\nclass snake {\r\n    head: HTMLElement\r\n    body: HTMLCollectionOf<HTMLElement>\r\n    element: HTMLElement\r\n\r\n    constructor() {\r\n        this.element = document.querySelector(\".snake\")\r\n        this.head = document.querySelector(\".snake>div\")\r\n        this.body = this.element.getElementsByTagName(\"div\")\r\n    }\r\n\r\n    //获取蛇头坐标\r\n    get X() {\r\n        return this.head.offsetLeft\r\n    }\r\n\r\n    get Y() {\r\n        return this.head.offsetTop\r\n    }\r\n\r\n    //设置蛇头的坐标\r\n    set X(val) {\r\n        if (this.X == val) {\r\n            return\r\n        }\r\n        if (val < 0 || val >= parseInt(getComputedStyle(document.querySelector(\".viev\"), null).width)) {\r\n            throw new Error(\"蛇撞墙了\")\r\n        }\r\n        if(this.body[1]&&this.body[1].offsetLeft===val) {\r\n            throw new Error(\"蛇撞到自己了\")\r\n        }\r\n        this.moveBody()\r\n        this.head.style.left = `${val}px`\r\n        this.snakeCrash()\r\n    }\r\n\r\n    set Y(val) {\r\n        if (this.Y == val) {\r\n            return\r\n        }\r\n        if (val < 0 || val >= parseInt(getComputedStyle(document.querySelector(\".viev\"), null).height)) {\r\n            throw new Error(\"蛇撞墙了\")\r\n        }\r\n        if (this.body[1] && this.body[1].offsetTop === val) {\r\n            throw new Error(\"蛇撞到自己了\")\r\n        }\r\n        this.moveBody()\r\n        this.head.style.top = `${val}px`\r\n        this.snakeCrash()\r\n    }\r\n\r\n    //添加蛇\r\n    addSnake() {\r\n        this.element.insertAdjacentHTML(\"beforeend\", \"<div></div>\")\r\n    }\r\n    // 移动身体\r\n    moveBody(){\r\n        for (let i = this.body.length-1; i >0;i--){\r\n            let left=this.body[i-1].offsetLeft;\r\n            let top = this.body[i - 1].offsetTop;\r\n            this.body[i].style.left=`${left}px`;\r\n            this.body[i].style.top = `${top}px`\r\n        }\r\n    }\r\n    // 监测是否发生碰撞\r\n    snakeCrash() {\r\n        for (let i =1;i<this.body.length;i++){\r\n            if(this.X===this.body[i].offsetLeft&&this.Y===this.body[i].offsetTop){\r\n                throw new Error(\"蛇撞到自己了\")\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//游戏\r\nclass Game {\r\n    //食物\r\n    food: Food\r\n    //积分器\r\n    scoringDevice: scoringDevice\r\n    //蛇\r\n    snake: snake\r\n    //方向\r\n    keyBay: string = \"ArrowRight\"\r\n\r\n    flag: boolean = true\r\n    // 开始游戏\r\n    begin:HTMLElement\r\n    // off\r\n    off=true\r\n    constructor() {\r\n        this.food = new Food()\r\n        this.scoringDevice = new scoringDevice(10,3)\r\n        this.snake = new snake()\r\n        // this.flag&&this.init()\r\n        this.begin=document.querySelector(\"#begin\")\r\n        this.go()\r\n\r\n    }\r\n\r\n    //绑定键盘事件\r\n    init() {\r\n        document.addEventListener(\"keydown\", this.keydownH.bind(this))\r\n        this.move()\r\n\r\n    }\r\n    // 开始游戏\r\n    go(){\r\n        this.begin.addEventListener(\"click\",()=>{\r\n            if (this.off){\r\n                this.begin.innerHTML=\"按下 p 键暂停\"\r\n                for(let j=1;j<this.snake.body.length;){\r\n                    this.snake.body[j].remove()\r\n                }\r\n                // 积分器归零\r\n                this.scoringDevice.score = 0\r\n                this.scoringDevice.level = 1\r\n                this.scoringDevice.scoreEl.innerHTML = `${this.scoringDevice.score}`\r\n                this.scoringDevice.levelEl.innerHTML = `${this.scoringDevice.level}`\r\n                // 回到起点\r\n                this.snake.X = 0\r\n                this.snake.Y = 0\r\n                // 删除自身\r\n                this.flag=true\r\n                this.keyBay = \"ArrowRight\"\r\n                this.init()\r\n                this.off = false\r\n            }\r\n        })\r\n    }\r\n\r\n    keydownH(event: KeyboardEvent) {\r\n        const key = [\"ArrowUp\", \"w\", \"ArrowDown\", \"s\", \"ArrowRight\", \"d\", \"ArrowLeft\", \"a\",'p']\r\n        key.forEach((item) => {\r\n            if(event.key==item){\r\n                this.keyBay = event.key\r\n            }\r\n\r\n        })\r\n\r\n\r\n    }\r\n\r\n    //ArrowUp\r\n    // ArrowDown\r\n    // ArrowRight\r\n    // ArrowLeft\r\n    move() {\r\n        //读取蛇的x、y值\r\n        let x = this.snake.X\r\n        let y = this.snake.Y\r\n        switch (this.keyBay) {\r\n            case \"ArrowUp\":\r\n            case \"w\":\r\n                y -= 10\r\n                break;\r\n            case \"ArrowDown\":\r\n            case \"s\":\r\n                y += 10\r\n                break;\r\n            case \"ArrowRight\":\r\n            case \"d\":\r\n                x += 10\r\n                break;\r\n            case \"ArrowLeft\":\r\n            case \"a\":\r\n                x -= 10\r\n                break;\r\n            case \"p\":\r\n                this.keyBay=\"\"\r\n                document.body.style.backgroundColor = \"#bfa\"\r\n                document.getElementById(\"end\").innerHTML = \"游戏暂停\"\r\n                break;\r\n        }\r\n        if (this.keyBay != \"\"){\r\n            document.body.style.backgroundColor = \"#fff\"\r\n            document.getElementById(\"end\").innerHTML = \"\"\r\n        }\r\n        this.eatFoot(x,y)\r\n        //    修改蛇的x、y值\r\n        try {\r\n            this.snake.X = x\r\n            this.snake.Y = y\r\n        } catch(err) {\r\n            document.body.style.backgroundColor = \"red\"\r\n            this.begin.innerHTML=\"重新开始\"\r\n            // alert(err.message)\r\n            document.getElementById(\"end\").innerHTML = `${err.message}  GameOver`\r\n            this.off=true\r\n            this.flag=false\r\n        }\r\n        // console.log(y,x)\r\n        this.flag&&setTimeout(this.move.bind(this), 250 - (this.scoringDevice.level - 1) * 25)\r\n    }\r\n    // 检查蛇是否吃到食物\r\n    eatFoot(x:number, y:number){\r\n        if(x===this.food.X && y===this.food.Y){\r\n            this.snake.addSnake()\r\n            this.food.create()\r\n            this.scoringDevice.addScore()\r\n        }\r\n    }\r\n\r\n}\r\n\r\nnew Game()\r\n"],"names":["viev","document","querySelector","this","element","offsetLeft","offsetTop","create","vievBorderWidth","parseInt","getComputedStyle","borderWidth","width","left","Math","round","random","top","style","maxLevel","update","score","level","scoreEl","levelEl","addScore","innerHTML","addLevel","head","body","getElementsByTagName","val","X","Error","moveBody","snakeCrash","Y","height","addSnake","insertAdjacentHTML","i","length","snake","keyBay","flag","off","food","Food","scoringDevice","begin","go","init","addEventListener","keydownH","bind","move","remove","event","forEach","item","key","x","y","backgroundColor","getElementById","eatFoot","err","message","setTimeout"],"sourceRoot":""}